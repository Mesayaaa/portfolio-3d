<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Canvas Dark Mode Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-button {
            background: #e5a1aa;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #d68a95;
        }
        
        .test-result {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #e5a1aa;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        
        .error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        
        .warning {
            border-left-color: #ffc107;
            background: #fff3cd;
        }
        
        .code {
            background: #f1f3f4;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üåô 3D Canvas Dark Mode Test</h1>
        <p>This test page helps verify that the 3D canvas is properly visible in dark mode.</p>
        
        <div class="test-buttons">
            <button class="test-button" onclick="testCanvasVisibility()">Test Canvas Visibility</button>
            <button class="test-button" onclick="testThemeSwitch()">Test Theme Switch</button>
            <button class="test-button" onclick="testZIndex()">Test Z-Index</button>
            <button class="test-button" onclick="testBackground()">Test Background</button>
            <button class="test-button" onclick="runAllTests()">Run All Tests</button>
        </div>
        
        <div id="test-results"></div>
        
        <div class="code">
            <h3>Quick Commands:</h3>
            <p>Open browser console and run:</p>
            <ul>
                <li><code>debugCanvas()</code> - Debug canvas visibility</li>
                <li><code>toggleTheme()</code> - Toggle theme</li>
                <li><code>forceCanvasVisibility()</code> - Force canvas to show</li>
            </ul>
        </div>
    </div>

    <script>
        function addResult(test, status, message) {
            const resultsDiv = document.getElementById('test-results');
            const statusClass = status === 'success' ? 'success' : status === 'error' ? 'error' : 'warning';
            const statusIcon = status === 'success' ? '‚úÖ' : status === 'error' ? '‚ùå' : '‚ö†Ô∏è';
            
            resultsDiv.innerHTML += `
                <div class="test-result ${statusClass}">
                    <strong>${statusIcon} ${test}</strong><br>
                    ${message}
                </div>
            `;
        }

        function testCanvasVisibility() {
            const canvas = document.querySelector('.experience-canvas');
            if (!canvas) {
                addResult('Canvas Element', 'error', 'Canvas element not found');
                return false;
            }
            
            const styles = window.getComputedStyle(canvas);
            const isVisible = styles.visibility === 'visible' && styles.opacity !== '0' && styles.display !== 'none';
            
            addResult('Canvas Visibility', isVisible ? 'success' : 'error', 
                `Visibility: ${styles.visibility}, Opacity: ${styles.opacity}, Display: ${styles.display}`);
            
            return isVisible;
        }

        function testThemeSwitch() {
            const isDark = document.body.classList.contains('dark-theme');
            const canvas = document.querySelector('.experience-canvas');
            const experience = document.querySelector('.experience');
            
            if (!canvas || !experience) {
                addResult('Theme Switch', 'error', 'Canvas or experience element not found');
                return false;
            }
            
            const canvasStyles = window.getComputedStyle(canvas);
            const experienceStyles = window.getComputedStyle(experience);
            
            const expectedBg = isDark ? '#1a1a1a' : '#faf4e5';
            const actualCanvasBg = canvasStyles.backgroundColor;
            const actualExperienceBg = experienceStyles.backgroundColor;
            
            const isCorrect = actualCanvasBg.includes(isDark ? '26, 26, 26' : '250, 244, 229');
            
            addResult('Theme Switch', isCorrect ? 'success' : 'warning', 
                `Current theme: ${isDark ? 'Dark' : 'Light'}<br>
                Canvas BG: ${actualCanvasBg}<br>
                Experience BG: ${actualExperienceBg}`);
            
            return isCorrect;
        }

        function testZIndex() {
            const canvas = document.querySelector('.experience-canvas');
            const experience = document.querySelector('.experience');
            const page = document.querySelector('.page');
            
            if (!canvas || !experience || !page) {
                addResult('Z-Index Test', 'error', 'Required elements not found');
                return false;
            }
            
            const canvasZ = window.getComputedStyle(canvas).zIndex;
            const experienceZ = window.getComputedStyle(experience).zIndex;
            const pageZ = window.getComputedStyle(page).zIndex;
            
            const isCorrect = parseInt(experienceZ) === 1 && parseInt(pageZ) === 2;
            
            addResult('Z-Index Test', isCorrect ? 'success' : 'warning', 
                `Experience Z-Index: ${experienceZ}<br>
                Page Z-Index: ${pageZ}<br>
                Canvas Z-Index: ${canvasZ}`);
            
            return isCorrect;
        }

        function testBackground() {
            const page = document.querySelector('.page');
            if (!page) {
                addResult('Background Test', 'error', 'Page element not found');
                return false;
            }
            
            const pageStyles = window.getComputedStyle(page);
            const isTransparent = pageStyles.backgroundColor === 'rgba(0, 0, 0, 0)' || 
                                 pageStyles.backgroundColor === 'transparent';
            
            addResult('Background Test', isTransparent ? 'success' : 'warning', 
                `Page background: ${pageStyles.backgroundColor}<br>
                ${isTransparent ? 'Correctly transparent to show 3D' : 'May be blocking 3D background'}`);
            
            return isTransparent;
        }

        function runAllTests() {
            document.getElementById('test-results').innerHTML = '';
            
            setTimeout(() => testCanvasVisibility(), 100);
            setTimeout(() => testThemeSwitch(), 200);
            setTimeout(() => testZIndex(), 300);
            setTimeout(() => testBackground(), 400);
            
            setTimeout(() => {
                addResult('All Tests Complete', 'success', 'All tests have been run. Check results above.');
            }, 500);
        }

        // Auto-run basic test on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (document.querySelector('.experience-canvas')) {
                    testCanvasVisibility();
                } else {
                    addResult('Initial Test', 'warning', 'Canvas not found - make sure you are on the main portfolio page');
                }
            }, 1000);
        });
    </script>
</body>
</html>
