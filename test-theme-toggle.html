<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Toggle Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #f4f4f4;
            height: 200vh; /* Make page scrollable */
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .scroll-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: monospace;
        }
        
        .success {
            color: #28a745;
            font-weight: bold;
        }
        
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        
        .instructions {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        
        .spacer {
            height: 100px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üéØ Theme Toggle Scroll Position Test</h1>
        
        <div class="instructions">
            <h3>üìã Cara Testing:</h3>
            <ol>
                <li>Scroll ke posisi manapun di halaman ini</li>
                <li>Klik tombol "Test Theme Toggle" di bawah</li>
                <li>Perhatikan apakah posisi scroll berubah</li>
                <li>Jika posisi tetap sama = ‚úÖ PASS</li>
                <li>Jika posisi berubah/scroll ke atas = ‚ùå FAIL</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>üîß Quick Tests</h3>
            <button class="test-button" onclick="testScrollPreservation()">Test Theme Toggle</button>
            <button class="test-button" onclick="scrollToPosition(500)">Scroll to 500px</button>
            <button class="test-button" onclick="scrollToPosition(1000)">Scroll to 1000px</button>
            <button class="test-button" onclick="scrollToTop()">Scroll to Top</button>
        </div>
        
        <div class="scroll-info" id="scrollInfo">
            Current scroll position: 0px
        </div>
        
        <div class="test-section">
            <h3>üìä Test Results</h3>
            <div id="testResults">
                <p>Klik "Test Theme Toggle" untuk melihat hasil...</p>
            </div>
        </div>
        
        <div class="spacer">üìç Scroll Marker 1 (500px area)</div>
        <div class="spacer">üìç Scroll Marker 2 (800px area)</div>
        <div class="spacer">üìç Scroll Marker 3 (1200px area)</div>
        <div class="spacer">üìç Scroll Marker 4 (1600px area)</div>
        <div class="spacer">üìç Scroll Marker 5 (2000px area)</div>
        
        <div class="test-section">
            <h3>üéÆ Manual Testing</h3>
            <p>Untuk testing di portfolio utama:</p>
            <ol>
                <li>Buka halaman portfolio utama</li>
                <li>Scroll ke section manapun</li>
                <li>Klik toggle theme button di kanan atas</li>
                <li>Atau gunakan keyboard shortcut: <strong>Ctrl/Cmd + Shift + T</strong></li>
                <li>Verifikasi posisi scroll tidak berubah</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>üõ†Ô∏è Debug Commands</h3>
            <p>Jalankan di console browser:</p>
            <pre>
// Toggle theme programmatically
toggleTheme();

// Test scroll preservation
testThemeToggle();

// Debug theme system
testDarkMode();
            </pre>
        </div>
    </div>

    <script>
        // Update scroll position display
        function updateScrollInfo() {
            const scrollInfo = document.getElementById('scrollInfo');
            const scrollY = window.pageYOffset || document.documentElement.scrollTop;
            scrollInfo.textContent = `Current scroll position: ${scrollY}px`;
        }
        
        // Update scroll info on scroll
        window.addEventListener('scroll', updateScrollInfo);
        updateScrollInfo();
        
        // Test scroll preservation
        function testScrollPreservation() {
            const scrollBefore = window.pageYOffset || document.documentElement.scrollTop;
            const resultDiv = document.getElementById('testResults');
            
            resultDiv.innerHTML = `
                <p>üß™ Testing scroll preservation...</p>
                <p>Scroll position before: ${scrollBefore}px</p>
                <p>Simulating theme toggle...</p>
            `;
            
            // Simulate theme toggle (if available)
            if (window.toggleTheme) {
                window.toggleTheme();
            } else {
                // Fallback: simulate with DOM manipulation
                document.body.classList.toggle('dark-theme');
                document.body.classList.toggle('light-theme');
            }
            
            // Check scroll position after delay
            setTimeout(() => {
                const scrollAfter = window.pageYOffset || document.documentElement.scrollTop;
                const difference = Math.abs(scrollAfter - scrollBefore);
                const passed = difference < 10;
                
                resultDiv.innerHTML = `
                    <p>üìä Test Results:</p>
                    <p>Scroll position before: ${scrollBefore}px</p>
                    <p>Scroll position after: ${scrollAfter}px</p>
                    <p>Difference: ${difference}px</p>
                    <p class="${passed ? 'success' : 'error'}">
                        ${passed ? '‚úÖ PASS - Scroll position preserved!' : '‚ùå FAIL - Scroll position changed!'}
                    </p>
                `;
            }, 200);
        }
        
        // Scroll to specific position
        function scrollToPosition(position) {
            window.scrollTo({
                top: position,
                behavior: 'smooth'
            });
        }
        
        // Scroll to top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // Auto-test on page load
        window.addEventListener('load', () => {
            console.log('üéØ Theme Toggle Test Page loaded');
            console.log('üìù Instructions:');
            console.log('1. Scroll anywhere on this page');
            console.log('2. Click "Test Theme Toggle" button');
            console.log('3. Check if scroll position is preserved');
            
            // Test if we're on the main portfolio page
            if (window.toggleTheme) {
                console.log('‚úÖ toggleTheme() function available');
            } else {
                console.log('‚ö†Ô∏è toggleTheme() function not available - using fallback');
            }
        });
    </script>
</body>
</html>
